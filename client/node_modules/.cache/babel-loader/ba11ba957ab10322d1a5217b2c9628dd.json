{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ensureTopicStats = exports.createTopicStats = exports.createPeerStats = void 0;\n\nfunction createPeerStats(ps = {}) {\n  return Object.assign(Object.assign({\n    connected: false,\n    expire: 0,\n    ips: [],\n    behaviourPenalty: 0\n  }, ps), {\n    topics: ps.topics ? Object.entries(ps.topics).reduce((topics, [topic, topicStats]) => {\n      topics[topic] = createTopicStats(topicStats);\n      return topics;\n    }, {}) : {}\n  });\n}\n\nexports.createPeerStats = createPeerStats;\n\nfunction createTopicStats(ts = {}) {\n  return Object.assign({\n    inMesh: false,\n    graftTime: 0,\n    meshTime: 0,\n    firstMessageDeliveries: 0,\n    meshMessageDeliveries: 0,\n    meshMessageDeliveriesActive: false,\n    meshFailurePenalty: 0,\n    invalidMessageDeliveries: 0\n  }, ts);\n}\n\nexports.createTopicStats = createTopicStats;\n\nfunction ensureTopicStats(topic, ps, params) {\n  let ts = ps.topics[topic];\n\n  if (ts) {\n    return ts;\n  }\n\n  if (!params.topics[topic]) {\n    return undefined;\n  }\n\n  ps.topics[topic] = ts = createTopicStats();\n  return ts;\n}\n\nexports.ensureTopicStats = ensureTopicStats;","map":null,"metadata":{},"sourceType":"script"}