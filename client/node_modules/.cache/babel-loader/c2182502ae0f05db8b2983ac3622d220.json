{"ast":null,"code":"'use strict';\n\nconst PeerId = require('peer-id');\n\nconst multiaddr = require('multiaddr');\n\nconst errCode = require('err-code');\n\nconst _require = require('./errors'),\n      codes = _require.codes;\n/**\n * @typedef {import('multiaddr')} Multiaddr\n */\n\n/**\n * Converts the given `peer` to a `Peer` object.\n * If a multiaddr is received, the addressBook is updated.\n *\n * @param {PeerId|Multiaddr|string} peer\n * @returns {{ id: PeerId, multiaddrs: Multiaddr[]|undefined }}\n */\n\n\nfunction getPeer(peer) {\n  if (typeof peer === 'string') {\n    peer = multiaddr(peer);\n  }\n\n  let addr;\n\n  if (multiaddr.isMultiaddr(peer)) {\n    addr = peer;\n\n    try {\n      peer = PeerId.createFromB58String(peer.getPeerId());\n    } catch (err) {\n      throw errCode(new Error(\"\".concat(peer, \" is not a valid peer type\")), codes.ERR_INVALID_MULTIADDR);\n    }\n  }\n\n  return {\n    id: peer,\n    multiaddrs: addr ? [addr] : undefined\n  };\n}\n\nmodule.exports = getPeer;","map":null,"metadata":{},"sourceType":"script"}