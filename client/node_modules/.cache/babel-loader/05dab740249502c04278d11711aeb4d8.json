{"ast":null,"code":"'use strict';\n\nconst _require = require('./utils'),\n      isValidMultiaddr = _require.isValidMultiaddr;\n\nconst withTimeoutOption = require('ipfs-core-utils/src/with-timeout-option');\n/**\n * @param {Object} config\n * @param {import('.').Repo} config.repo\n */\n\n\nmodule.exports = ({\n  repo\n}) => {\n  /**\n   * Add a peer address to the bootstrap list\n   *\n   * @param {Multiaddr} multiaddr - The address of a network peer\n   * @param {AbortOptions} [options]\n   * @returns {Promise<Peers>}\n   * @example\n   * ```js\n   * const validIp4 = '/ip4/104....9z'\n   *\n   * const res = await ipfs.bootstrap.add(validIp4)\n   * console.log(res.Peers)\n   * // Logs:\n   * // ['/ip4/104....9z']\n   * ```\n   */\n  async function add(multiaddr, options = {}) {\n    if (!isValidMultiaddr(multiaddr)) {\n      throw new Error(\"\".concat(multiaddr, \" is not a valid Multiaddr\"));\n    }\n\n    const config = await repo.config.getAll(options); // @ts-ignore - May not have `Bootstrap`\n\n    if (config.Bootstrap.indexOf(multiaddr.toString()) === -1) {\n      // @ts-ignore - May not have `Bootstrap`\n      config.Bootstrap.push(multiaddr.toString());\n    }\n\n    await repo.config.replace(config);\n    return {\n      Peers: [multiaddr]\n    };\n  }\n\n  return withTimeoutOption(add);\n};\n/**\n * @typedef {import('./utils').Peers} Peers\n * @typedef {import('.').AbortOptions} AbortOptions\n * @typedef {import('.').CID} CID\n * @typedef {import('.').Multiaddr} Multiaddr\n */","map":null,"metadata":{},"sourceType":"script"}