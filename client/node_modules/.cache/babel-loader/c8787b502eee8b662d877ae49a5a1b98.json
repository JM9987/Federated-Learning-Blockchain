{"ast":null,"code":"'use strict';\n\nconst PeerId = require('peer-id');\n\nconst withTimeoutOption = require('ipfs-core-utils/src/with-timeout-option');\n/**\n * @param {Object} config\n * @param {import('.').NetworkService} config.network\n */\n\n\nmodule.exports = ({\n  network\n}) => {\n  /**\n   * Returns the wantlist for a connected peer\n   *\n   * @example\n   * ```js\n   * const list = await ipfs.bitswap.wantlistForPeer(peerId)\n   * console.log(list)\n   * // [ CID('QmHash') ]\n   * ```\n   *\n   * @param {PeerId | CID | string | Uint8Array} peerId - A peer ID to return the wantlist for\\\n   * @param {AbortOptions} [options]\n   * @returns {Promise<CID[]>} - An array of CIDs currently in the wantlist\n   *\n   */\n  async function wantlistForPeer(peerId, options = {}) {\n    const _ref = await network.use(options),\n          bitswap = _ref.bitswap;\n\n    const list = bitswap.wantlistForPeer(PeerId.createFromCID(peerId), options);\n    return Array.from(list).map(e => e[1].cid);\n  }\n\n  return withTimeoutOption(wantlistForPeer);\n};\n/**\n * @typedef {import('.').AbortOptions} AbortOptions\n * @typedef {import('.').CID} CID\n */\n\n/**\n * @template ExtraOptions\n * @callback WantlistForPeer\n * @param {PeerId | CID | string | Uint8Array} peerId\n * @param {AbortOptions & ExtraOptions} [options]\n * @returns {Promise<CID[]>}\n */","map":null,"metadata":{},"sourceType":"script"}